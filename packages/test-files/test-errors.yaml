openapi: 3.1.0
x-sailpoint-api:
  version: v2025
  audience: external-public
info:
  title: Comprehensive Error Test Cases
  version: 1.0.0
  description: All error-level test cases consolidated into a single document
tags:
  - name: Users
  - name: Authentication
paths:
  # Operation Basic Fields - Error (missing description)
  /test/operation-basic-fields-missing-description:
    get:
      operationId: testOperationBasicFieldsMissingDescription
      responses:
        "200":
          description: OK

  # Operation Basic Fields - Error (placeholder text)
  /test/operation-basic-fields-placeholder:
    get:
      operationId: testOperationBasicFieldsPlaceholder
      description: "TODO: Add description"
      responses:
        "200":
          description: OK

  # Operation Summary - Error (missing)
  /test/operation-summary-missing:
    get:
      operationId: testOperationSummaryMissing
      description: Operation without summary
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation ID Format - Error (missing)
  /test/operation-id-format-missing:
    get:
      responses:
        "200":
          description: OK

  # Operation ID Format - Error (not camelCase)
  /test/operation-id-format-not-camelcase:
    get:
      operationId: test_get
      summary: Get test
      description: Operation with non-camelCase ID
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation ID Unique in Path - Error (duplicate)
  /test/operation-id-unique-in-path-error:
    get:
      operationId: testOperation
      summary: Get test
      description: First operation
      tags:
        - Users
      responses:
        "200":
          description: OK
    post:
      operationId: testOperation
      summary: Create test
      description: Second operation with duplicate ID
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation Tags - Error (missing)
  /test/operation-tags-missing:
    get:
      operationId: testOperationTagsMissing
      summary: Get users
      description: Operation without tags
      responses:
        "200":
          description: OK

  # Operation Tags - Error (not Title Case)
  /test/operation-tags-not-title-case:
    get:
      operationId: testOperationTagsNotTitleCase
      summary: Get users
      description: Operation with lowercase tag
      tags:
        - users
      responses:
        "200":
          description: OK

  # Operation Tags - Error (not alphabetically sorted at root)
  /test/operation-tags-not-sorted-root:
    get:
      operationId: testOperationTagsNotSortedRoot
      summary: Get users
      description: Test root tags sorting
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation Security Requirements - Error (missing)
  /test/operation-security-missing:
    get:
      operationId: testOperationSecurityMissing
      summary: Get data
      description: Operation without security
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation Security Requirements - Error (invalid key)
  /test/operation-security-invalid-key:
    get:
      operationId: testOperationSecurityInvalidKey
      summary: Get data
      description: Operation with invalid security key
      security:
        - invalidAuth: []
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation Responses - Error (missing)
  /test/operation-responses-missing:
    get:
      operationId: testOperationResponsesMissing
      summary: Get data
      description: Operation without responses

  # Operation Responses - Error (no success)
  /test/operation-responses-no-success:
    get:
      operationId: testOperationResponsesNoSuccess
      summary: Get data
      description: Operation without 2xx response
      tags:
        - Users
      responses:
        "400":
          description: Bad request

  # Operation Responses - Error (missing error codes)
  /test/operation-responses-missing-errors:
    get:
      operationId: testOperationResponsesMissingErrors
      summary: Get data
      description: Operation missing required error responses
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation Pagination - Error (missing limit)
  /test/pagination-missing-limit:
    get:
      operationId: listUsers
      summary: List users
      description: List operation without limit parameter
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  # Operation Pagination - Error (missing offset)
  /test/pagination-missing-offset:
    get:
      operationId: listUsers
      summary: List users
      description: List operation without offset parameter
      tags:
        - Users
      parameters:
        - name: limit
          in: query
          required: true
          description: Maximum items
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  # Operation Pagination - Error (limit lacks min/max)
  /test/pagination-limit-lacks-bounds:
    get:
      operationId: listUsers
      summary: List users
      description: Pagination with limit lacking bounds
      tags:
        - Users
      parameters:
        - name: limit
          in: query
          required: true
          description: Maximum items
          schema:
            type: integer
        - name: offset
          in: query
          required: true
          description: Skip items
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object

  # Operation User Levels - Error (missing)
  /test/operation-user-levels-missing:
    get:
      operationId: testOperationUserLevelsMissing
      summary: Get data
      description: Operation without user levels
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation User Levels - Error (invalid format)
  /test/operation-user-levels-invalid-format:
    get:
      operationId: testOperationUserLevelsInvalidFormat
      summary: Get data
      description: Operation with invalid user level format
      x-sailpoint-userLevels:
        - org-admin
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation Description HTML - Error (contains HTML tags)
  /test/operation-description-html-tags:
    get:
      operationId: testOperationDescriptionHtmlTags
      summary: Get data
      description: This is <b>bold</b> text
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Operation Description HTML - Error (contains HTML entity)
  /test/operation-description-html-entity:
    get:
      operationId: testOperationDescriptionHtmlEntity
      summary: Get data
      description: This has &copy; entity
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Parameter Description - Error (missing)
  /test/parameter-description-missing:
    get:
      operationId: testParameterDescriptionMissing
      summary: Get with parameter
      description: Parameter without description
      tags:
        - Users
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Description - Error (too short)
  /test/parameter-description-too-short:
    get:
      operationId: testParameterDescriptionTooShort
      summary: Get with parameter
      description: Parameter with short description
      tags:
        - Users
      parameters:
        - name: id
          in: path
          required: true
          description: Short
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Example - Error (missing)
  /test/parameter-example-missing:
    get:
      operationId: testParameterExampleMissing
      summary: Get with parameter
      description: Parameter without example
      tags:
        - Users
      parameters:
        - name: id
          in: path
          required: true
          description: User identifier
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Example Keys - Error (too short)
  /test/parameter-example-keys-too-short:
    get:
      operationId: testParameterExampleKeysTooShort
      summary: Get with examples
      description: Parameter with example key too short
      tags:
        - Users
      parameters:
        - name: id
          in: query
          required: false
          description: User identifier
          examples:
            x1:
              value: "123"
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Example Keys - Error (too long)
  /test/parameter-example-keys-too-long:
    get:
      operationId: testParameterExampleKeysTooLong
      summary: Get with examples
      description: Parameter with example key too long
      tags:
        - Users
      parameters:
        - name: id
          in: query
          required: false
          description: User identifier
          examples:
            this-is-a-very-long-example-key-name-that-exceeds-twenty-characters:
              value: "123"
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Formats - Error (integer lacks format)
  /test/parameter-formats-integer-missing:
    get:
      operationId: testParameterFormatsIntegerMissing
      summary: Get with integer
      description: Integer parameter without format
      tags:
        - Users
      parameters:
        - name: count
          in: query
          required: true
          description: Number of items
          schema:
            type: integer
      responses:
        "200":
          description: OK

  # Parameter Formats - Error (number lacks format)
  /test/parameter-formats-number-missing:
    get:
      operationId: testParameterFormatsNumberMissing
      summary: Get with number
      description: Number parameter without format
      tags:
        - Users
      parameters:
        - name: price
          in: query
          required: true
          description: Item price
          schema:
            type: number
      responses:
        "200":
          description: OK

  # Parameter Required - Error (missing)
  /test/parameter-required-missing:
    get:
      operationId: testParameterRequiredMissing
      summary: Get with parameter
      description: Parameter without required flag
      tags:
        - Users
      parameters:
        - name: id
          in: path
          description: User identifier
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Default - Error (boolean lacks default)
  /test/parameter-default-missing:
    get:
      operationId: testParameterDefaultMissing
      summary: Get with boolean
      description: Optional boolean parameter without default
      tags:
        - Users
      parameters:
        - name: active
          in: query
          required: false
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: OK

  # Parameter Filters - Error (lacks description)
  /test/parameter-filters-missing-description:
    get:
      operationId: testParameterFiltersMissingDescription
      summary: Get with filters
      description: Filters parameter without description
      tags:
        - Users
      parameters:
        - name: filters
          in: query
          required: false
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Filters - Error (description lacks required link)
  /test/parameter-filters-description-lacks-link:
    get:
      operationId: testParameterFiltersDescriptionLacksLink
      summary: Get with filters
      description: Filters parameter with incomplete description
      tags:
        - Users
      parameters:
        - name: filters
          in: query
          required: false
          description: Some description
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Sorters - Error (lacks description)
  /test/parameter-sorters-missing-description:
    get:
      operationId: testParameterSortersMissingDescription
      summary: Get with sorters
      description: Sorters parameter without description
      tags:
        - Users
      parameters:
        - name: sorters
          in: query
          required: false
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter Sorters - Error (description lacks required link)
  /test/parameter-sorters-description-lacks-link:
    get:
      operationId: testParameterSortersDescriptionLacksLink
      summary: Get with sorters
      description: Sorters parameter with incomplete description
      tags:
        - Users
      parameters:
        - name: sorters
          in: query
          required: false
          description: Some description
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter In - Error (missing)
  /test/parameter-in-missing:
    get:
      operationId: testParameterInMissing
      summary: Get with parameter
      description: Parameter without 'in' field
      tags:
        - Users
      parameters:
        - name: id
          required: false
          description: User identifier
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter In - Error (not a string)
  /test/parameter-in-not-string:
    get:
      operationId: testParameterInNotString
      summary: Get with parameter
      description: Parameter with 'in' that is not a string
      tags:
        - Users
      parameters:
        - name: id
          in: 123
          required: false
          description: User identifier
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Parameter In - Error (invalid value for OpenAPI 3.x)
  /test/parameter-in-invalid-value:
    get:
      operationId: testParameterInInvalidValue
      summary: Get with parameter
      description: Parameter with invalid 'in' value for OpenAPI 3.x
      tags:
        - Users
      parameters:
        - name: id
          in: formData
          required: false
          description: User identifier
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Path Params Match - Error (parameter not in path)
  /test/path-params-match-parameter-not-in-path/{id}:
    get:
      operationId: testPathParamsMatchParameterNotInPath
      summary: Get user
      description: Path template has {id} but parameter is in query, not path
      tags:
        - Users
      parameters:
        - name: id
          in: query
          required: true
          description: User identifier
          schema:
            type: string
      responses:
        "200":
          description: OK

  # Path Params Match - Error (path template param not declared)
  /test/path-params-match-template-not-declared/{id}:
    get:
      operationId: testPathParamsMatchTemplateNotDeclared
      summary: Get user
      description: Path template has {id} but parameter is not declared
      tags:
        - Users
      responses:
        "200":
          description: OK

  # Path Params Match - Error (multiple path params missing)
  /test/path-params-match-multiple-missing/{petId}/owners/{ownerId}:
    get:
      operationId: getPetOwner
      summary: Get pet owner
      description: Get pet owner by petId and ownerId - missing both path parameters
      tags:
        - Users
      x-sailpoint-userLevels:
        - ADMIN
      security:
        - userAuth: []
      responses:
        "200":
          description: Pet owner information

  # Schema Description - Error (property lacks description)
  /test/schema-description-property-missing:
    get:
      operationId: testSchemaDescriptionPropertyMissing
      summary: Get schema
      description: Schema property without description
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string

  # Schema Example - Error (property lacks example)
  /test/schema-example-property-missing:
    get:
      operationId: testSchemaExamplePropertyMissing
      summary: Get schema
      description: Schema property without example
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                  age:
                    type: integer

  # Schema Example Keys - Error (too short)
  /test/schema-example-keys-too-short:
    get:
      operationId: testSchemaExampleKeysTooShort
      summary: Get schema
      description: Schema with example key too short
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                examples:
                  x1:
                    value:
                      name: "John"

  # Schema Example Keys - Error (too long)
  /test/schema-example-keys-too-long:
    get:
      operationId: testSchemaExampleKeysTooLong
      summary: Get schema
      description: Schema with example key too long
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                examples:
                  this-is-a-very-long-example-key-name-that-exceeds-twenty-characters:
                    value:
                      name: "John"

  # Schema Formats - Error (integer property lacks format)
  /test/schema-formats-integer-property-missing:
    get:
      operationId: testSchemaFormatsIntegerPropertyMissing
      summary: Get schema
      description: Integer property without format
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  age:
                    type: integer

  # Schema Formats - Error (number property lacks format)
  /test/schema-formats-number-property-missing:
    get:
      operationId: testSchemaFormatsNumberPropertyMissing
      summary: Get schema
      description: Number property without format
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  price:
                    type: number

  # Schema Required - Error (object with properties lacks required array)
  /test/schema-required-object-lacks-array:
    get:
      operationId: testSchemaRequiredObjectLacksArray
      summary: Get schema
      description: Object schema with properties but no required array
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                  email:
                    type: string

  # Schema Default - Error (boolean property lacks default)
  /test/schema-default-property-missing:
    get:
      operationId: testSchemaDefaultPropertyMissing
      summary: Get schema
      description: Optional boolean property without default
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  active:
                    type: boolean
                    description: Active status

  # Schema Structure - Error (array lacks items)
  /test/schema-structure-array-lacks-items:
    get:
      operationId: testSchemaStructureArrayLacksItems
      summary: Get schema
      description: Array schema without items
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array

  # Schema Structure - Error (allOf with type at same level)
  /test/schema-structure-allof-with-type:
    get:
      operationId: testSchemaStructureAllofWithType
      summary: Get schema
      description: Schema with allOf and type at same level
      tags:
        - Users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                allOf:
                  - type: object
                    properties:
                      name:
                        type: string

  # Note: Root-level error tests (missing info, missing x-sailpoint-api, etc.) 
  # must be in separate files since they test the root document structure itself.
  # See: test-info-should-error-when-info-section-is-missing.yaml
  #      test-sailpoint-api-should-error-when-*.yaml
  #      test-ascii-should-error-when-non-ascii-characters-are-present.yaml

  # Unresolved Ref - Error
  /test/unresolved-ref-error:
    get:
      operationId: testUnresolvedRefError
      summary: Get data
      description: Reference that cannot be resolved
      tags:
        - Users
      parameters:
        - $ref: "#/components/parameters/NonExistent"
      responses:
        "200":
          description: OK

components:
  schemas:
    SchemaRequiredObjectLacksArray:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
    SchemaDefaultPropertyMissing:
      type: object
      properties:
        active:
          type: boolean
          description: Active status
    SchemaStructureArrayLacksItems:
      type: array
    SchemaStructureAllofWithType:
      type: object
      allOf:
        - type: object
          properties:
            name:
              type: string
    SchemaDescriptionPropertyMissing:
      type: object
      properties:
        name:
          type: string
    SchemaExamplePropertyMissing:
      type: object
      properties:
        name:
          type: string
        age:
          type: integer
    SchemaExampleKeysTooShort:
      type: object
      properties:
        name:
          type: string
      examples:
        x1:
          value:
            name: "John"
    SchemaExampleKeysTooLong:
      type: object
      properties:
        name:
          type: string
      examples:
        this-is-a-very-long-example-key-name-that-exceeds-twenty-characters:
          value:
            name: "John"
    SchemaFormatsIntegerPropertyMissing:
      type: object
      properties:
        age:
          type: integer
    SchemaFormatsNumberPropertyMissing:
      type: object
      properties:
        price:
          type: number
  securitySchemes:
    userAuth:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://example.com/oauth/authorize
          tokenUrl: https://example.com/oauth/token

