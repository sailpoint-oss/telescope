openapi: 3.0.0
info:
  title: Customer API
  version: "1.0"
  description: |
    # Customer API

    A comprehensive API for managing customer information in your application.

    ## Features

    - **CRUD Operations**: Create, read, update, and delete customer records
    - **UUID Identifiers**: All customers are identified by unique UUIDs
    - **Email Validation**: Customer emails are validated on input

    ## Authentication

    This API uses Bearer token authentication. Include your API key in the
    `Authorization` header:

    ```ts
    const response = await fetch("https://api.example.com/v1/customers", {
      headers: {
        Authorization: "Bearer your-api-key-here"
      }
    });
    ```

    ![Example Request](./example-request.png)

    ```go
    client := &http.Client{
      Transport: &transport.RetryableTransport{
        Base: http.DefaultTransport,
        RetryPolicy: transport.RetryPolicy{
          MaxRetries: 3,
        },
      },
    }
    ```

    ## Rate Limiting

    API requests are limited to **100 requests per minute** per API key.
tags:
  - name: customers
    description: |
      ## Customer Management

      Operations for managing customer records in the system.

      ### Available Operations

      | Method | Endpoint | Description |
      |--------|----------|-------------|
      | `GET` | `/customers` | List all customers |
      | `POST` | `/customers` | Create a new customer |
      | `GET` | `/customers/{id}` | Get customer by ID |

      ### Data Model

      Each customer has the following properties:
      - `id` - Unique identifier (UUID, read-only)
      - `name` - Customer's full name
      - `email` - Customer's email address
servers:
  - url: "https://api.example.com/v1"
    description: Production server
  - url: "http://localhost:8080/v1"
    description: Local development server
paths:
  /customers:
    get:
      tags:
        - customers
      summary: Get all customers
      description: |
        Retrieves a paginated list of all customer records in the system.

        ## Query Parameters

        You can filter and paginate results using query parameters:

        - `limit` - Maximum number of results (default: 20, max: 100)
        - `offset` - Number of results to skip for pagination
        - `sort` - Field to sort by (`name`, `email`, `created_at`)

        ## Example Request

        ```bash
        curl -X GET "https://api.example.com/v1/customers?limit=10&sort=name" \
          -H "Authorization: Bearer your-api-key"
        ```

        ## Response Format

        Returns an array of `Customer` objects. Each object contains:
        - The customer's **unique ID**
        - Their **name** and **email** address

        > **Note**: Results are sorted by creation date by default.
      responses:
        "200":
          description: A list of customers
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Customer"
    post:
      tags:
        - customers
      summary: Create a new customer
      description: |
        Creates a new customer record in the system.

        ## Request Body

        Send a JSON object with the following **required** fields:

        | Field | Type | Description |
        |-------|------|-------------|
        | `name` | string | Customer's full name |
        | `email` | string | Valid email address |

        ## Validation Rules

        1. **Name** must be between 1-255 characters
        2. **Email** must be a valid email format
        3. Email addresses must be *unique* across all customers

        ## Example

        ```json
        {
          "name": "Jane Smith",
          "email": "jane.smith@example.com"
        }
        ```
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CustomerInput"
      responses:
        "201":
          description: Customer created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "400":
          description: Invalid input
  /customers/{customerId}:
    parameters:
      - name: customerId
        in: path
        required: true
        description: The ID of the customer to retrieve or update.
        schema:
          type: string
          format: uuid
    get:
      summary: Get a customer by ID
      description: Retrieves a single customer record by its ID.
      responses:
        "200":
          description: A single customer
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Customer"
        "404":
          description: Customer not found
components:
  schemas:
    Customer:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          example: John Doe
        email:
          type: string
          format: email
          example: john.doe@example.com
      required:
        - id
        - name
        - email
    CustomerInput:
      type: object
      properties:
        name:
          type: string
          example: Jane Smith
        email:
          type: string
          format: email
          example: jane.smith@example.com
      required:
        - name
        - email
